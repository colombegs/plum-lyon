<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Styler 3D - Plum Living</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üü£</text></svg>">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="fonts/fonts.css">
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="shared/styles/variables.css">
    <link rel="stylesheet" href="shared/styles/reset.css">
    <link rel="stylesheet" href="shared/components/navbar.css">
    <link rel="stylesheet" href="navbar.css">
    
    <!-- Page Styles -->
    <link rel="stylesheet" href="styler.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-white navbar-has-hover">
        <div class="navbar-container">
            <!-- Logo -->
            <div class="navbar-logo">
                <a href="home.html" class="logo-link">
                    <img src="images/logo.png" alt="plum living" class="logo-image logo-white" style="display: none;">
                    <img src="images/logo-black.png" alt="plum living" class="logo-image logo-black">
                </a>
            </div>

            <!-- Navigation principale -->
            <ul class="navbar-nav">
                <li class="nav-item nav-item-dropdown">
                    <a href="#" class="nav-link">CONCEPT</a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <div class="dropdown-columns">
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">D√©couvrir</div>
                                    <a href="#" class="dropdown-link">Le concept Plum Living</a>
                                    <a href="#" class="dropdown-link">Nos couleurs</a>
                                    <a href="#" class="dropdown-link">Nos engagements</a>
                                    <a href="#" class="dropdown-link">FAQ</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">Je commence</div>
                                    <a href="#" class="dropdown-link">√âchantillons</a>
                                    <a href="marseille.html" class="dropdown-link">Showroom</a>
                                    <a href="#" class="dropdown-link">Conception au showroom</a>
                                    <a href="#" class="dropdown-link">Club Pro</a>
                                    <a href="poseurs.html" class="dropdown-link">Trouver un poseur</a>
                                </div>
                            </div>
                            <div class="dropdown-media-group">
                                <div class="dropdown-media">
                                    <div class="dropdown-media-image">
                                        <img src="images/couleur.jpg" alt="Nos couleurs">
                                        <div class="dropdown-media-overlay">
                                            <div class="dropdown-media-content">
                                                <h5 class="dropdown-media-title">Nos couleurs</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="dropdown-media">
                                    <div class="dropdown-media-image">
                                        <img src="images/showroom.jpg" alt="Le Showroom">
                                        <div class="dropdown-media-overlay">
                                            <div class="dropdown-media-content">
                                                <h5 class="dropdown-media-title">Le Showroom</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item nav-item-dropdown">
                    <a href="#" class="nav-link">CUISINE</a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <div class="dropdown-columns">
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">INSPIRATION</div>
                                    <a href="#" class="dropdown-link">Nos cuisines chez vous</a>
                                    <a href="plumwall.html" class="dropdown-link">Gallerie projets</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">OUTILS & SERVICES</div>
                                    <a href="styler.html" class="dropdown-link">Styler 3D</a>
                                    <a href="#" class="dropdown-link">Estimation en 2min</a>
                                    <a href="#" class="dropdown-link">Estimation et devis</a>
                                    <a href="#" class="dropdown-link">Prendre rendez-vous</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">SHOP</div>
                                    <a href="#" class="dropdown-link">√âchantillons</a>
                                    <a href="#" class="dropdown-link">Fa√ßades Metod</a>
                                    <a href="#" class="dropdown-link">Plans de travail</a>
                                    <a href="#" class="dropdown-link">Poign√©es</a>
                                    <a href="#" class="dropdown-link">√âtag√®res</a>
                                    <a href="#" class="dropdown-link">Meubles ouverts</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title hidden-title">SHOP</div>
                                    <a href="#" class="dropdown-link">Mitigeurs</a>
                                    <a href="#" class="dropdown-link">Eviers</a>
                                    <a href="#" class="dropdown-link">Cr√©dences</a>
                                    <a href="#" class="dropdown-link">Carreaux</a>
                                    <a href="#" class="dropdown-link">Plinthes</a>
                                    <a href="#" class="dropdown-link">Peinture</a>
                                </div>
                            </div>
                            <div class="dropdown-media">
                                <div class="dropdown-media-image">
                                    <img src="images/pk_20251008_ateliercvd070_hd.jpg" alt="Chez Caroline Debono">
                                    <div class="dropdown-media-overlay">
                                        <div class="dropdown-media-content">
                                            <h5 class="dropdown-media-title">Chez Caroline Debono, fondatrice d'Atelier CVD</h5>
                                            <p class="dropdown-media-subtitle">Debono, fondatrice</p>
                                            <p class="dropdown-media-description">d'Atelier CVD</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item nav-item-dropdown">
                    <a href="#" class="nav-link">MAISON</a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <div class="dropdown-columns">
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">Cat√©gories</div>
                                    <a href="dressing.html" class="dropdown-link">Dressings</a>
                                    <a href="#" class="dropdown-link">Ponts de lits</a>
                                    <a href="#" class="dropdown-link">Buffets</a>
                                    <a href="#" class="dropdown-link">Rangements</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title hidden-title">Placeholder</div>
                                    <a href="#" class="dropdown-link">Salle de bain</a>
                                    <a href="#" class="dropdown-link">Bureaux</a>
                                    <a href="#" class="dropdown-link">Kids</a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-section-title">Shop</div>
                                    <a href="#" class="dropdown-link">Fa√ßades Pax</a>
                                    <a href="#" class="dropdown-link">Fa√ßades Metod</a>
                                    <a href="#" class="dropdown-link">Meubles ouverts</a>
                                    <a href="#" class="dropdown-link">√âtag√®res</a>
                                    <a href="#" class="dropdown-link">Poign√©es</a>
                                    <a href="#" class="dropdown-link">Peinture</a>
                                </div>
                            </div>
                            <div class="dropdown-media">
                                <div class="dropdown-media-image">
                                    <img src="images/navbar/dressing.jpg" alt="Slide Givre avec poign√©es Pauline Borgia">
                                    <div class="dropdown-media-overlay">
                                        <div class="dropdown-media-content">
                                            <h5 class="dropdown-media-title">Slide Givre avec poign√©es Pauline Borgia</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="experiments/media/index.html" class="nav-link">MEDIA</a>
                </li>
            </ul>

            <!-- Actions utilisateur -->
            <div class="navbar-actions">
                <!-- Barre de recherche -->
                <div class="search-container">
                    <button class="icon-button search-toggle" id="searchToggle" aria-label="Rechercher">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <div class="search-bar" id="searchBar">
                        <input type="text" class="search-input" id="searchInput" placeholder="Rechercher..." aria-label="Rechercher">
                        <button class="search-close" id="searchClose" aria-label="Fermer la recherche">
                            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Ic√¥nes -->
                <div class="navbar-icons">
                    <button class="icon-button" aria-label="Mon compte">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                    <button class="icon-button" aria-label="Panier">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                    </button>
                </div>

                <!-- Bouton CTA -->
                <a href="#" class="btn-cta">
                    <svg class="btn-cta-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                    <span class="btn-cta-text">JE COMMENCE</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="styler-main">
        <div class="styler-container">
            <!-- Page Header -->
            <div class="styler-header">
                <h3 class="styler-title">Styler 3D</h3>
                <p class="styler-subtitle">Explorez nos sc√®nes de cuisine en 3D et d√©couvrez diff√©rentes combinaisons de couleurs</p>
            </div>

            <!-- Gallery Grid -->
            <div class="styler-grid">
                <!-- Gallery Item 1 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/1.jpg" alt="Gallery 1" class="styler-image" data-default-src="images/styler/1.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">line</h2>
                                <p class="styler-description">Simplicit√© et couleur se rencontrent dans ce projet o√π la cuisine entre dans la pi√®ce de vie.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #8B7355;" aria-label="Couleur Moka" data-color="moka" data-image="images/styler/1.jpg"></button>
                                    <button class="color-swatch" style="background-color: #4A5568;" aria-label="Couleur Asphalte" data-color="asphalte" data-image="images/styler/1-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #E2E8F0;" aria-label="Couleur Smoke" data-color="smoke" data-image="images/styler/1-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #2D3748;" aria-label="Couleur Bleu Nuit" data-color="bleu-nuit" data-image="images/styler/1-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F7FAFC;" aria-label="Couleur Blanc Pur" data-color="blanc-pur" data-image="images/styler/1.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 2 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/2.jpg" alt="Gallery 2" class="styler-image" data-default-src="images/styler/2.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">float</h2>
                                <p class="styler-description">Une longue √©tag√®re file au dessus du plan de travail, exposant les objets que vous aimez.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #A0AEC0;" aria-label="Couleur Galet" data-color="galet" data-image="images/styler/2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #718096;" aria-label="Couleur Gris" data-color="gris" data-image="images/styler/2-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #EDF2F7;" aria-label="Couleur Lin" data-color="lin" data-image="images/styler/2-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #2C5282;" aria-label="Couleur Baltic" data-color="baltic" data-image="images/styler/2-4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #CBD5E0;" aria-label="Couleur Sable" data-color="sable" data-image="images/styler/2.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 3 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/3.jpg" alt="Gallery 3" class="styler-image" data-default-src="images/styler/3.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">frame</h2>
                                <p class="styler-description">Une cuisine d√Ætes "Tableau", o√π les meubles forment un grand rectangle.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #744210;" aria-label="Couleur Caramel" data-color="caramel" data-image="images/styler/3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #1A202C;" aria-label="Couleur Noir" data-color="noir" data-image="images/styler/3-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F0F4F8;" aria-label="Couleur Ivoire" data-color="ivoire" data-image="images/styler/3-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #4A5568;" aria-label="Couleur Asphalte" data-color="asphalte" data-image="images/styler/3-4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #E6FFFA;" aria-label="Couleur Ciel Voil√©" data-color="ciel-voile" data-image="images/styler/3.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 4 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/4.jpg" alt="Gallery 4" class="styler-image" data-default-src="images/styler/4.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">upline</h2>
                                <p class="styler-description">Un long plan de travail et quelques meubles hauts suspendus, pour un effet l√©ger visuellement.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #2D5016;" aria-label="Couleur Sombre Forest" data-color="sombre-forest" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #68D391;" aria-label="Couleur Vert de Gris" data-color="vert-de-gris" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #C6F6D5;" aria-label="Couleur Canop√©e" data-color="canopee" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #22543D;" aria-label="Couleur Olive" data-color="olive" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F0FFF4;" aria-label="Couleur Amandier Gris√©" data-color="amandier-grise" data-image="images/styler/4.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 5 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/1-2.jpg" alt="Gallery 5" class="styler-image" data-default-src="images/styler/1-2.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">line</h2>
                                <p class="styler-description">Simplicit√© et couleur se rencontrent dans ce projet o√π la cuisine entre dans la pi√®ce de vie.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #8B7355;" aria-label="Couleur Moka" data-color="moka" data-image="images/styler/1.jpg"></button>
                                    <button class="color-swatch" style="background-color: #4A5568;" aria-label="Couleur Asphalte" data-color="asphalte" data-image="images/styler/1-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #E2E8F0;" aria-label="Couleur Smoke" data-color="smoke" data-image="images/styler/1-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #2D3748;" aria-label="Couleur Bleu Nuit" data-color="bleu-nuit" data-image="images/styler/1-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F7FAFC;" aria-label="Couleur Blanc Pur" data-color="blanc-pur" data-image="images/styler/1.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 6 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/3-2.jpg" alt="Gallery 6" class="styler-image" data-default-src="images/styler/3-2.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">float</h2>
                                <p class="styler-description">Une longue √©tag√®re file au dessus du plan de travail, exposant les objets que vous aimez.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #A0AEC0;" aria-label="Couleur Galet" data-color="galet" data-image="images/styler/2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #718096;" aria-label="Couleur Gris" data-color="gris" data-image="images/styler/2-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #EDF2F7;" aria-label="Couleur Lin" data-color="lin" data-image="images/styler/2-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #2C5282;" aria-label="Couleur Baltic" data-color="baltic" data-image="images/styler/2-4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #CBD5E0;" aria-label="Couleur Sable" data-color="sable" data-image="images/styler/2.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 7 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/3-3.jpg" alt="Gallery 7" class="styler-image" data-default-src="images/styler/3-3.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">frame</h2>
                                <p class="styler-description">Une cuisine d√Ætes "Tableau", o√π les meubles forment un grand rectangle.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #744210;" aria-label="Couleur Caramel" data-color="caramel" data-image="images/styler/3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #1A202C;" aria-label="Couleur Noir" data-color="noir" data-image="images/styler/3-2.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F0F4F8;" aria-label="Couleur Ivoire" data-color="ivoire" data-image="images/styler/3-3.jpg"></button>
                                    <button class="color-swatch" style="background-color: #4A5568;" aria-label="Couleur Asphalte" data-color="asphalte" data-image="images/styler/3-4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #E6FFFA;" aria-label="Couleur Ciel Voil√©" data-color="ciel-voile" data-image="images/styler/3.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Item 8 -->
                <div class="styler-item">
                    <div class="styler-image-wrapper">
                        <img src="images/styler/3-4.jpg" alt="Gallery 8" class="styler-image" data-default-src="images/styler/3-4.jpg">
                        <div class="styler-overlay">
                            <div class="styler-content">
                                <h2 class="styler-scene-name">upline</h2>
                                <p class="styler-description">Un long plan de travail et quelques meubles hauts suspendus, pour un effet l√©ger visuellement.</p>
                                <div class="styler-colors">
                                    <button class="color-swatch" style="background-color: #2D5016;" aria-label="Couleur Sombre Forest" data-color="sombre-forest" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #68D391;" aria-label="Couleur Vert de Gris" data-color="vert-de-gris" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #C6F6D5;" aria-label="Couleur Canop√©e" data-color="canopee" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #22543D;" aria-label="Couleur Olive" data-color="olive" data-image="images/styler/4.jpg"></button>
                                    <button class="color-swatch" style="background-color: #F0FFF4;" aria-label="Couleur Amandier Gris√©" data-color="amandier-grise" data-image="images/styler/4.jpg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script>
        // Gestion simplifi√©e du hover sur les dropdowns
        const navbar = document.querySelector('.navbar');
        const dropdownItems = document.querySelectorAll('.nav-item-dropdown');
        
        if (navbar && dropdownItems.length > 0) {
            let closeTimeout = null;
            let currentHoveredItem = null;
            
            const openMenu = (dropdownItem) => {
                if (closeTimeout) {
                    clearTimeout(closeTimeout);
                    closeTimeout = null;
                }
                
                if (currentHoveredItem && currentHoveredItem !== dropdownItem) {
                    currentHoveredItem.classList.remove('is-hovered');
                }
                
                dropdownItem.classList.add('is-hovered');
                navbar.classList.add('navbar-white');
                navbar.classList.add('navbar-has-hover');
                currentHoveredItem = dropdownItem;
            };
            
            const closeMenu = () => {
                if (closeTimeout) {
                    clearTimeout(closeTimeout);
                }
                
                closeTimeout = setTimeout(() => {
                    if (currentHoveredItem) {
                        currentHoveredItem.classList.remove('is-hovered');
                        currentHoveredItem = null;
                    }
                    closeTimeout = null;
                }, 100);
            };
            
            dropdownItems.forEach(dropdownItem => {
                const dropdownMenu = dropdownItem.querySelector('.dropdown-menu');
                
                if (dropdownMenu) {
                    dropdownItem.addEventListener('mouseenter', () => openMenu(dropdownItem));
                    dropdownMenu.addEventListener('mouseenter', () => openMenu(dropdownItem));
                    dropdownItem.addEventListener('mouseleave', closeMenu);
                    dropdownMenu.addEventListener('mouseleave', closeMenu);
                }
            });
        }

        // Gestion de la barre de recherche
        document.addEventListener('DOMContentLoaded', () => {
            const searchContainer = document.querySelector('.search-container');
            const searchBar = document.getElementById('searchBar');
            const searchInput = document.getElementById('searchInput');
            const searchClose = document.getElementById('searchClose');
            const searchToggle = document.getElementById('searchToggle');

            if (!searchContainer || !searchBar || !searchInput) {
                return;
            }

            function openSearchBar() {
                searchBar.classList.add('search-bar-active');
                setTimeout(() => {
                    searchInput.focus();
                }, 300);
            }

            function closeSearchBar() {
                searchBar.classList.remove('search-bar-active');
            }

            searchContainer.addEventListener('mouseenter', openSearchBar);
            searchContainer.addEventListener('mouseleave', closeSearchBar);
            searchBar.addEventListener('mouseleave', closeSearchBar);

            if (searchClose) {
                searchClose.addEventListener('click', (e) => {
                    e.stopPropagation();
                    closeSearchBar();
                    searchInput.value = '';
                    searchInput.blur();
                });
            }

            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeSearchBar();
                    searchInput.value = '';
                    searchInput.blur();
                }
            });
        });

        // Gestion des pastilles de couleurs avec crossfade pour changer l'image
        document.addEventListener('DOMContentLoaded', () => {
            const colorSwatches = document.querySelectorAll('.color-swatch');
            
            // Cr√©er la deuxi√®me image pour le crossfade pour chaque styler-item
            const stylerItems = document.querySelectorAll('.styler-item');
            stylerItems.forEach((stylerItem, index) => {
                const imageWrapper = stylerItem.querySelector('.styler-image-wrapper');
                const mainImage = stylerItem.querySelector('.styler-image');
                
                if (!imageWrapper || !mainImage) return;
                
                // #region agent log
                fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:initCrossfade',message:'Creating crossfade images',data:{itemIndex:index,mainImageSrc:mainImage.src,mainImageOpacity:window.getComputedStyle(mainImage).opacity},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'A'})}).catch(()=>{});
                // #endregion
                
                // Cr√©er la deuxi√®me image pour le crossfade
                const nextImage = document.createElement('img');
                nextImage.className = 'styler-image styler-image-next';
                nextImage.src = mainImage.src;
                nextImage.alt = mainImage.alt;
                imageWrapper.insertBefore(nextImage, mainImage);
                
                // #region agent log
                fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:initCrossfade',message:'Next image created',data:{itemIndex:index,nextImageSrc:nextImage.src,nextImageOpacity:window.getComputedStyle(nextImage).opacity,nextImageZIndex:window.getComputedStyle(nextImage).zIndex},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'B'})}).catch(()=>{});
                // #endregion
                
                // Stocker les r√©f√©rences
                stylerItem.dataset.mainImage = '0'; // 0 = mainImage, 1 = nextImage
                stylerItem._mainImage = mainImage;
                stylerItem._nextImage = nextImage;
            });
            
            // Fonction pour changer d'image avec crossfade
            const changeImageWithCrossfade = (stylerItem, newSrc) => {
                if (!newSrc) return;
                
                const changeStartTime = Date.now();
                const mainImage = stylerItem._mainImage;
                const nextImage = stylerItem._nextImage;
                const currentMain = stylerItem.dataset.mainImage === '0' ? mainImage : nextImage;
                const currentNext = stylerItem.dataset.mainImage === '0' ? nextImage : mainImage;
                
                // #region agent log
                fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:changeImageWithCrossfade',message:'Change image called',data:{newSrc:newSrc,currentMainSrc:currentMain.src,currentMainOpacity:window.getComputedStyle(currentMain).opacity,currentNextOpacity:window.getComputedStyle(currentNext).opacity,currentMainZIndex:window.getComputedStyle(currentMain).zIndex,currentNextZIndex:window.getComputedStyle(currentNext).zIndex},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'C'})}).catch(()=>{});
                // #endregion
                
                // Si c'est la m√™me image, ne rien faire
                const currentSrc = currentMain.src.split('/').pop();
                const newSrcFile = newSrc.split('/').pop();
                if (currentSrc === newSrcFile) return;
                
                // Charger la nouvelle image dans l'image inactive
                currentNext.src = newSrc;
                
                // #region agent log
                fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:changeImageWithCrossfade',message:'New image src set',data:{currentNextSrc:currentNext.src,currentNextComplete:currentNext.complete,currentNextNaturalWidth:currentNext.naturalWidth},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'D'})}).catch(()=>{});
                // #endregion
                
                // Fonction pour faire le crossfade
                const doCrossfade = () => {
                    const beforeOpacity = {
                        main: window.getComputedStyle(currentMain).opacity,
                        next: window.getComputedStyle(currentNext).opacity
                    };
                    
                    // #region agent log
                    fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:doCrossfade',message:'Starting crossfade',data:{beforeOpacity:beforeOpacity,currentNextComplete:currentNext.complete,currentNextNaturalWidth:currentNext.naturalWidth,timeSinceChange:Date.now()-changeStartTime},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});
                    // #endregion
                    
                    currentNext.classList.add('fade-in');
                    currentMain.classList.add('fade-out');
                    
                    // V√©rifier l'√©tat imm√©diatement apr√®s
                    requestAnimationFrame(() => {
                        const afterOpacity = {
                            main: window.getComputedStyle(currentMain).opacity,
                            next: window.getComputedStyle(currentNext).opacity
                        };
                        // #region agent log
                        fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:doCrossfade',message:'After adding classes',data:{afterOpacity:afterOpacity,currentMainHasFadeOut:currentMain.classList.contains('fade-out'),currentNextHasFadeIn:currentNext.classList.contains('fade-in')},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});
                        // #endregion
                    });
                    
                    // Apr√®s la transition, r√©initialiser
                    setTimeout(() => {
                        const finalOpacity = {
                            main: window.getComputedStyle(currentMain).opacity,
                            next: window.getComputedStyle(currentNext).opacity
                        };
                        // #region agent log
                        fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:doCrossfade',message:'Before cleanup',data:{finalOpacity:finalOpacity},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});
                        // #endregion
                        
                        currentNext.classList.remove('fade-in');
                        currentMain.classList.remove('fade-out');
                        currentMain.style.opacity = '';
                        currentNext.style.opacity = '';
                        // √âchanger les r√¥les
                        stylerItem.dataset.mainImage = stylerItem.dataset.mainImage === '0' ? '1' : '0';
                    }, 100);
                };
                
                // Si l'image est d√©j√† charg√©e (en cache), faire le crossfade imm√©diatement
                if (currentNext.complete && currentNext.naturalWidth > 0) {
                    // #region agent log
                    fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:changeImageWithCrossfade',message:'Image already loaded, doing crossfade immediately',data:{},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});
                    // #endregion
                    doCrossfade();
                } else {
                    // #region agent log
                    fetch('http://127.0.0.1:7247/ingest/45a8b155-5349-4f6e-930d-b9fa1e3c96de',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'styler.html:changeImageWithCrossfade',message:'Waiting for image load',data:{},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});
                    // #endregion
                    // Sinon attendre le chargement
                    currentNext.onload = doCrossfade;
                }
            };
            
            // Gestion des √©v√©nements pour chaque pastille
            colorSwatches.forEach(swatch => {
                const stylerItem = swatch.closest('.styler-item');
                if (!stylerItem) return;
                
                // Stocker l'image par d√©faut
                const mainImage = stylerItem._mainImage;
                if (mainImage && !mainImage.dataset.defaultSrc) {
                    mainImage.dataset.defaultSrc = mainImage.src;
                }
                
                // Changement d'image au hover/touch
                const handleChange = (e) => {
                    e.stopPropagation();
                    const imageSrc = swatch.getAttribute('data-image');
                    if (imageSrc) {
                        changeImageWithCrossfade(stylerItem, imageSrc);
                    }
                };
                
                const handleReset = (e) => {
                    e.stopPropagation();
                    if (mainImage && mainImage.dataset.defaultSrc) {
                        changeImageWithCrossfade(stylerItem, mainImage.dataset.defaultSrc);
                    }
                };
                
                swatch.addEventListener('mouseenter', handleChange);
                swatch.addEventListener('touchstart', handleChange, { passive: true });
                
                swatch.addEventListener('mouseleave', handleReset);
                swatch.addEventListener('touchend', (e) => {
                    e.stopPropagation();
                    setTimeout(handleReset, 800);
                }, { passive: true });
                
                // Gestion du click (feedback visuel)
                swatch.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const color = swatch.getAttribute('data-color');
                    console.log('Couleur s√©lectionn√©e:', color);
                    swatch.classList.add('active');
                    setTimeout(() => {
                        swatch.classList.remove('active');
                    }, 300);
                });
            });
        });
    </script>
</body>
</html>

